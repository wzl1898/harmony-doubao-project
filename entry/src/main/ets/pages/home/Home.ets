import router from '@ohos.router'
import WechatToolbar from '../../component/WechatToolbar'

import { relationalStore, ValuesBucket } from '@kit.ArkData'
import ListRecordItem from '../../component/ListRecordList'

interface Recording extends ValuesBucket {
  id: number | null // æ–°å¢žæ—¶è®¾ç½® id ä¸ºç©ºå€¼ nullï¼Œç”¨äºŽè‡ªå¢ž id
  u_id: number
  //m_id: number
  name: string
  des: string
  time: string
  //url: Resource
}

@Preview
@Component
export default struct Home {
  aboutToAppear(): void {
    //TODO: go through all ChatMsg From database and create all ChatWindow(ChatItemData)
  }
  // @State chatList: ChatItemData[] = [
  //   {
  //     headSrc: $r("app.media.ic_user_head2"),
  //     nickname: "è€å©†",
  //     content: "ä»Šæ™šç»™ä½ åšäº†å¥½åƒçš„ï¼Œæ—©ç‚¹ä¸‹ç­å“¦ðŸ˜Š",
  //     time: "17:21"
  //   },
  //   {
  //     headSrc: $r("app.media.ic_user_head3"),
  //     nickname: "æ¸¸æˆå¥½å‹",
  //     content: "æˆ‘ä»Šå¤©åˆæ‹¿äº†äº”æ€ï¼Œç‰›é€¼ä¸ï¼Ÿ",
  //     time: "15:38"
  //   },
  //   {
  //     headSrc: $r("app.media.ic_user_head4"),
  //     nickname: "åŒäº‹å°æŽ",
  //     content: "é¢†å¯¼ï¼ŒæŠ¥ç»™å†™å¥½äº†ï¼Œè¯·è¿‡ç›®",
  //     time: "14:12"
  //   }
  // ]
  @State recodeList: Recording[] = [
    {
      id: 1,
      u_id: 1,
      name: 'test',
      des: 'string',
      time: 'çŽ°åœ¨'
    }
  ]

  build() {
    Column() {
      WechatToolbar({ title: "è±†åŒ…" })

      List() {
        ForEach(this.recodeList, (item: Recording, index: number) => {
          ListItem() {
            ListRecordItem({ data: item })
          }
          .onClick(() => {
            router.pushUrl({
              url: 'pages/chat/ChatPage',
              params: { c_id: item.id }
            })
          })
        })
        ListItem() {
          Divider().color('#0000').strokeWidth(0)
        }
      }
      .divider({
        strokeWidth: 0.8,
        color: '#f0f0f0',
        startMargin: 90,
        endMargin: 0
      }) // æ¯è¡Œä¹‹é—´çš„åˆ†ç•Œçº¿
      .backgroundColor(Color.White)
      .width("100%")
      .height("100%")

      // Button('Ok', { type: ButtonType.Normal, stateEffect: true })
      //   .height('20%')
      //   .width('40%')
      //   .onClick(() => {
      //     // this.test_api("hello?")
      //   })
    }
    .width("100%")
    .height("100%")
    .backgroundColor("#f0f0f0")
  }


}